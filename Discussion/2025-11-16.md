# Discussion Summary - November 16, 2025

## Project Purpose

**FlowHub** is a production-ready, accessibility-first automation proving ground that demonstrates semantic test invariance across three distinct UI implementations. Built by a QA Automation Engineer learning the complete SDLC, this project serves as both a portfolio showcase and an open-source contribution to the QA community.

### Key Points
- **Not a demo app** - Real, deployable application
- **Portfolio showcase** - Demonstrates QA + SDLC skills
- **Open source contribution** - For the QA community
- **Learning journey** - Understanding development from PRD to production

## Core Decisions

### Tech Stack
- **Frontend**: Next.js with TypeScript (three UI variants)
- **Backend**: TypeScript + Node.js (Express/Fastify)
- **Database**: MongoDB Atlas (512MB free tier)
- **Cache**: Upstash Redis (30MB, ephemeral only)
- **Storage**: AWS S3
- **Email**: AWS SES
- **Real-time**: WebSocket (socket.io)

### Why TypeScript?
- Type safety for production-ready code
- Better IDE support and refactoring
- Self-documenting code
- Essential for maintaining real applications

### Why Next.js (not plain React)?
- Built on React (we use React)
- Adds server-side rendering, API routes, routing
- Production-ready optimizations
- Perfect for full-stack application

### Why Node.js if using TypeScript?
- TypeScript compiles to JavaScript
- Node.js runs the compiled JavaScript
- Node.js provides server-side capabilities (HTTP, file system, etc.)

### Stack Classification
- **Enhanced MERN**: MongoDB, Express, React (via Next.js), Node.js
- **Plus**: TypeScript, modern services (Redis, S3, SES, SNS)

## Infrastructure Decisions

### Hosting
- **Frontend**: Vercel (free tier)
- **Backend (Prod)**: Fly.io (512MB RAM, scale-to-zero)
- **Backend (Dev)**: Render (free tier)
- **Database**: MongoDB Atlas (512MB free tier)
- **Cache**: Upstash Redis (30MB free tier)

### Additional Services
- **AWS S3**: File storage
- **AWS SES**: Email delivery
- **AWS SNS**: SES webhooks (free tier)
- **Logtail**: Logging (free tier)
- **Rollbar**: Error monitoring (free tier)

### Cost
- **Total**: ₹900-₹1400/month
- Most services on free tiers
- Webhooks, notifications, chat add ₹0 extra (use existing infrastructure)

## Testing Strategy

### Selector Policy (Priority Order)
1. **Accessible Name Sources**: `aria-labelledby` → `aria-label` → visually hidden text (`sr-only`)
2. **Fallback**: `data-testid` (when semantics aren't reliable)
3. **Last Resort**: CSS/XPath (only for temporary workarounds, with tickets)

### Testing Stack
- **E2E**: Python + Playwright (semantic locators only)
- **API**: Python + requests + pytest (black-box HTTP tests)
- **Unit**: Frontend logic (hooks, utilities) with mocks
- **Integration**: UI logic with mocked services
- **CI/CD**: GitHub Actions with full test gates

## Features & Flows

### MVP Scope
- Auth + Tasks CRUD + Comments + Files
- Seed data: 1 admin, 2 users, 2 projects, ~12 tasks
- Three UI variants (v1: Bootstrap, v2: Tailwind, v3: Custom CSS - later)

### 18 User Flows
- Complete task management platform
- All flows maintain accessibility semantics
- Same tests run across all UI variants

### Notification System
- **In-app**: MongoDB storage, WebSocket delivery
- **Email**: AWS SES, MongoDB queue
- **Events**: Task updates, approvals, mentions, project updates

### Chat System
- **Storage**: MongoDB (persistent)
- **Delivery**: WebSocket (socket.io)
- **Presence**: Redis (ephemeral)
- **Mentions**: Integrated with notification system

### Webhooks
- **Hosting**: Fly.io backend (no extra cost)
- **Incoming**: SES events via SNS
- **Outgoing**: User-configured URLs with HMAC signing
- **Retry**: MongoDB-based queue

## Authentication

### Primary Method
- Email + password with email verification (AWS SES)

### Optional (Later)
- **GitHub OAuth**: Easy to implement, no approval needed for standard scopes
- **Google OAuth**: Testing mode only (production requires verification)

## Key Principles

### Day-One Non-Negotiables
1. Tests with every feature
2. Semantic selectors first
3. Accessibility always (WCAG 2.1 AA)
4. CI gates block deployment
5. Reproducible setup (docker-compose)
6. Observability (Logtail + Rollbar)

### What to Avoid
- Over-scoping before MVP is green
- CSS/XPath as first choice
- No seeds / hard setup
- Skipping logging/monitoring

## Portfolio Artifacts (Planned)

- 2-minute demo video
- CI/CD badges in README
- Architecture diagrams
- Sample test reports
- "How to evaluate my work" document

## MVP+1 Features (Optional, Later)

- Rate limits + CAPTCHA (skipped - not needed for portfolio)
- Webhooks + API tokens (documented in infrastructure)
- Audit trail with TTL + S3 archival
- Lighthouse CI + performance budgets

## Next Steps

1. Create monorepo skeleton
2. Implement MVP (Auth + Tasks CRUD + Comments + Files)
3. Add tests (unit, integration, API, E2E)
4. Set up CI/CD pipeline
5. Create seed data
6. Document quickstart guide
7. Record demo video

## Important Notes

- **RabbitMQ**: Not needed for MVP - MongoDB + Redis handle queues efficiently
- **CAPTCHA**: Skipped - rate limits + email verification sufficient
- **Webhooks**: Hosted on Fly.io backend (no extra cost)
- **v3 Challenge**: Separate RFC after v1/v2 stable
- **License**: MIT
- **Contributions**: Issues welcome now, PRs after v1 stabilizes

---

**This document captures key decisions and discussions from our planning session. Use it as a reference when implementing the project.**

